<img width="100%" src="https://user-images.githubusercontent.com/119720123/233232525-da2edf28-45b1-4606-af87-d09d13d477e2.jpg">

# <img  width="200" src="https://user-images.githubusercontent.com/119720123/233232957-1d8420a9-fca7-4137-a428-aeb87d46e46a.png">

<img width="100%" src="https://user-images.githubusercontent.com/119720123/235292172-30c240d0-1123-43d9-b881-cb6882177dc8.png">
프로젝트명 : Pet Place (P.P)

프로젝트 설명 : 사업자는 반려동물에 관한 업체(병원,미용,카페)를 등록하고, 유저가 검색, 필터링 할 수 있는 웹페이지 (위치기반정보제공 서비스)

[🐶 팀 노션 링크](https://bow-starfish-ba2.notion.site/Team3-Pet-Place-7d132d0dc6764eee90799fe342dec49f)

[🐱 Pet Place 링크](https://fe-fawn.vercel.app/)

[TEAM PHOTOBOOK😆](https://bow-starfish-ba2.notion.site/fe2a02c07c0e498fb2cebe79b901e81a)

## 🐶 프로젝트 소개

- 유저의 위치에 따른 반려동물 관련 시설 및 동반시설에 대한 정보를 제공하고 추천합니다.
- 검색 및 정렬을 사용하여 플레이스를 조회할 수 있습니다.
- 방문 시설에 대한 후기를 작성하고, 평가를 할 수 있습니다.
- 사업자의 경우 업체를 등록하고 홍보하며, 후기에 대한 알림을 확인할 수 있습니다.

## 👤 팀 정보

| 이름     | FE/BE           | Github                           |
| -------- | --------------- | -------------------------------- |
| 남궁윤서 | FE , Sub-Leader | https://github.com/lionloopy     |
| 신은진   | FE              | https://github.com/JESin10       |
| 이건호   | BE, Leader      | https://github.com/Kuno1734      |
| 김우영   | BE              | https://github.com/micheal1woo   |
| 표창영   | BE              | https://github.com/PyoChangYeong |
| 김은정   | DE              | eunjung427@naver.com             |

## 📚 FE 기술스택

<div align="center">
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> <img src="https://img.shields.io/badge/react query-FF4154?style=for-the-badge&logo=react query&logoColor=white"> <img src="https://img.shields.io/badge/react router-CA4245?style=for-the-badge&logo=react router&logoColor=white"> <img src="https://img.shields.io/badge/create react app-09D3AC?style=for-the-badge&logo=create react app&logoColor=black"> 

<img src="https://img.shields.io/badge/styled components-DB7093?style=for-the-badge&logo=styled components&logoColor=white"> <img src="https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white"> <img src="https://img.shields.io/badge/vercel-000000?style=for-the-badge&logo=vercel&logoColor=white"> <img src="https://img.shields.io/badge/yarn-2C8EBB?style=for-the-badge&logo=yarn&logoColor=white"> <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">

</div>

## 📚 BE 기술스택

<div align="center">
  <img src="https://img.shields.io/badge/Java-007396?style=flat&logo=Java&logoColor=white" />
  <img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat&logo=Spring Boot&logoColor=white" />
  <img src="https://img.shields.io/badge/Spring Security-6DB33F?style=flat&logo=Spring Security&logoColor=white" />
  <img src="https://img.shields.io/badge/Amazon S3-569A31?style=flat&logo=Amazon S3&logoColor=white" />
  <img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=flat&logo=Amazon RDS&logoColor=white" />
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=flat&logo=MySQL&logoColor=white" />
  <img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=flat&logo=Amazon EC2&logoColor=white" />
  <img src="https://img.shields.io/badge/Linux-FCC624?style=flat&logo=linux&logoColor=white" />
  <img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=flat&logo=github Actions&logoColor=white" />
  <img src="https://img.shields.io/badge/Ubuntu-E95420?style=flat&logo=ubuntu&logoColor=white" />

</div>

## ⚙️ 협업 Tools

<div align="center">
<a href = "https://github.com/Hun-Se"><img alt="GitHub" src ="https://img.shields.io/badge/GitHub-181717.svg?&style=for-the-badge&logo=GitHub&logoColor=white"/>
</a> <a href = "hun-se.slack.com"> <img alt="Slack" src ="https://img.shields.io/badge/Slack-4A154B.svg?&style=for-the-badge&logo=Slack&logoColor=white"/></a> <a href = "https://guttural-eyebrow-89d.notion.site/cfc360a8a0984eafbb85f7dd4696b943"> <img alt="Notion" src ="https://img.shields.io/badge/Notion-000000.svg?&style=for-the-badge&logo=Notion&logoColor=white"/></a> <a href = "https://www.figma.com"> <img alt="Figma" src ="https://img.shields.io/badge/figma-F24E1E.svg?&style=for-the-badge&logo=figma&logoColor=white"/></a>
</div>


## 📝 주요기능

- 유저/사업자별 회원가입
- 로그인/로그아웃
- 소셜(카카오)로그인
- 근거리기반 장소 확인
- 카테고리별 게시글 확인(무한스크롤 적용)
- 근거리순 / 별점순 / 후기순 정렬
- 업체명 / 내용 / 장소 기반의 검색
- 찜하기 및 찜하기 취소
- 지도 내의 업체 위치 확인 및 길찾기 연결
- 후기 및 별점 등록
- 프로필이미지 및 닉네임 수정
- 댓글 및 찜목록 조회/수정/삭제
- 댓글 작성시 사업자 알림 확인
- 등록 업체 모아보기 및 수정

## 🎨 와이어프레임 예시

<img width="100%" alt="와이어프레임1" src="https://user-images.githubusercontent.com/119720123/233171898-b2002cbd-4032-4100-a51c-dd5806f223c6.png">

## 🎥 페이지 예시

<details><summary>회원가입 / 로그인•로그아웃 / 소셜로그인/</summary>

<img width="200" alt="회원가입" src="https://user-images.githubusercontent.com/119720123/233168531-cda0a640-75b8-48c4-887f-6240cc8735f9.gif"> <img width="200" alt="로그인•로그아웃" src="https://user-images.githubusercontent.com/119720123/233168083-6dd4e0b8-5279-4854-a922-9cefb46f88a7.gif"> <img width="200" alt="카카오로그인" src="https://user-images.githubusercontent.com/119720123/233165752-1f8c847e-ed5b-4110-914b-60fa3d3ffdf4.gif">

</details>

<details><summary>메인페이지 / 정렬 / 검색 / 찜하기 / 무한스크롤_moblie</summary>

<img width="80" alt="메인페이지" src="https://user-images.githubusercontent.com/119720123/233168956-32bb75e5-f0be-422c-8598-83328ede7f32.gif"> <img width="150" alt="정렬" src="https://user-images.githubusercontent.com/119720123/233166555-d80145b9-8ed1-4655-abdc-8c355ae7afb3.gif"> <img width="80" alt="검색" src="https://user-images.githubusercontent.com/119720123/233169144-3985c0ef-b489-466c-bda6-7e8417db6cc8.gif"> <img width="80" alt="찜하기•취소" src="https://user-images.githubusercontent.com/119720123/233169264-c86365b1-d22e-4de5-82e7-174ac84178d7.gif"> <img width="80" alt="무한스크롤" src="https://user-images.githubusercontent.com/119720123/233168807-8dd09179-75cb-40e1-a1e3-e1cc372f0d06.gif">

</details>

<details><summary>내가봤던기록 / 상세페이지 / 무한스크롤_web / 마이페이지</summary>

<img width="150" alt="내가봤던기록" src="https://user-images.githubusercontent.com/119720123/233170798-c477e3f8-6faf-4444-b44b-278fdf731da7.gif"> <img width="150" alt="상세페이지" src="https://user-images.githubusercontent.com/119720123/233170391-4b3908a9-639f-43dd-afab-2b7898ae29b1.gif"> <img width="150" alt="무한스크롤*웹" src="https://user-images.githubusercontent.com/119720123/233170937-29f2c066-cdc2-442e-8643-ceda614368ad.gif"> <img width="150" alt="마이페이지" src="https://user-images.githubusercontent.com/119720123/233170672-f2423ab6-2cd4-4413-b3ae-7690976f2d5c.gif">

</details>

<details><summary>사업자업체등록 / 사업자알림확인 / 사업자후기작성불가 / 사업자업체수정</summary>

<img width="150" alt="사업자업체등록" src="https://user-images.githubusercontent.com/119720123/233171198-3dbb6e5b-9fd1-4dc6-bb38-00e6538de3de.gif"> <img width="150" alt="사업자알림확인" src="https://user-images.githubusercontent.com/119720123/233171381-b05f9218-8d01-4b16-8ae1-729ece162aa5.gif"> <img width="150" alt="사업자후기작성불가" src="https://user-images.githubusercontent.com/119720123/233171656-4b2a400b-d63d-4a38-876e-e1dabc642959.gif"> <img width="150" alt="사업자업체수정" src="https://user-images.githubusercontent.com/119720123/233171552-4a70c37a-2655-4c38-9c9d-cb8749af4a4a.gif">

</details>

## 🧱 ERD 예시

<img width="970" alt="ERD" src="https://user-images.githubusercontent.com/119720123/233372178-ddc61b7e-3cfa-4a64-9f49-2e2afb9dee20.png">

## 📌 API 명세서 예시

<img width="1486" alt="API명세서예시" src="https://user-images.githubusercontent.com/119720123/233155357-8d084a4e-ca48-493d-929a-f81eec8c9615.png">

[API 명세서 상세보기](https://bow-starfish-ba2.notion.site/API-5843adb55eb34576be3bfd447d8269f3)

## 🔥 FE 트러블슈팅 간략소개

<details><summary>map 좌표를 구할 때, maps와 Geocoder를 불러오지 못하는 오류</summary>

문제 상황: 위치에 따른 좌표(위도,경도)를 구하는 과정에서 maps와 Geocoder를 불러오지 못하는 오류가 발생했다.

해결 과정:

1. 필요한 라이브러리를 설치했다. ⇒ 라이브러리와 관련이 없었음
2. kakao map API_KEY를 발급하는 과정에서, web platform등록을 localhost:3000이 아닌, localhost:8080으로 들어가 있었다. ⇒ 설치 후 maps는 해결이 되었으나, Geocoder는 해결이 되지 않았음

해결 방법: public/index.html에 script를 추가해주었다. 이 때 API_KEY를 넣어주었다.

```
   <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c467b978bcec068d4109736b2039502c&libraries=services"
    ></script>
```

</details>

<details><summary>카카오로그인 구현중 cookie에 아무런 정보가 담기지 않으면서 로그인이 통과되는 오류</summary>

문제 상황: setCookie("RefreshToken", RefreshToken, { path: "/" }) 으로 쿠키에 정보들을 담으려고 했지만 담기지 않으면서 로그인은 통과되는 문제가 발생했다.

해결 과정:

1. 새로고침하면 쿠키에 정보들이 없어지나 싶어서 useEffect 구문의 의존성 배열에 code를 넣어 code가 바뀔 때 마다로 조건을 바꿔보았다 ⇒ 효과가 없었음
2. 옵션 객체에 {maxAge:86000} 을 넣어서 새로고침 되더라도 쿠키안에 정보들이 유지되게 해 보았다 ⇒ 아예 작동되지 않았음
   ※ 기존 정보들을 Cookie에 담고 있었기 때문에 localStorage에 담는 방식으로 변경하기엔 시간이 부족하다 판단.

해결방법: react-cookie를 사용해 설정해주던 setCookie 대신 js-cookie 라이브러리를 사용해 Cookies.set으로 변경하였다.

```
    import Cookies from "js-cookie";
    Cookies.set("AccessToken", AccessToken);
    // setCookie("RefreshToken", RefreshToken, { path: "/" });
```

</details>


## 🔥 BE 트러블슈팅 간략소개

<details><summary>리눅스 권한</summary>

문제 상황

- CodeDeploy를 통해서 CICD를 구축해서 AWS EC2에 Spring Server를 배포.
- FE서버와의 연결상태 확인.
- 게시글 작성에서 이미지를 리스트로 업로드하는 부분이 서버상에서 작동하지 않는다..

```
java.io.ioexception: permission denied
```

해결 과정

1. 현재 ubuntu 에서 사용자 권환상태를 확인.
2. 권한 침범이 예상되는 경로에 chmod 755 -R /경로 를 사용해서 권한 업데이트 후 메서드 실행 - 실패

해결 방법: appspec.yml에서 petmissions 부분을 변경.

```
    version: 0.0
    os: linux

    files:
      - source:  /
        destination: /home/ubuntu/app
        overwrite: yes

    permissions:
      - object: /
        pattern: "**"
        owner: ubuntu -> root 로 변경
        group: ubuntu

    hooks:
      AfterInstall:
        - location: scripts/stop.sh
          timeout: 60
          runas: ubuntu
      ApplicationStart:
        - location: scripts/start.sh
          timeout: 60
          runas: root
```

</details>

<details><summary>Nginx 언더스코어(_)가 포함된 헤더를 제거하는 현상</summary>

문제 상황

- `public static final _String_ REFRESH_TOKEN = "Refresh_token";`
- Refresh_token을 선언하여 Response header에 추가해주는 로직.
- Local 환경에서 테스트를 진행시 header에 "Refresh_token" 이 정상적으로 들어온것을 확인.
- 배포된 서버에서 Refresh_token 을 갱신할때 문제 발생.
- Refresh_token을 갱신할때 HttpServletRequest header 에서 값을 읽어 와야하는데 로그를 전부 찍어보니 Refresh_token 이 추가되어 들어오지 않았다.

해결 과정

1. Refresh_token이 들어가는 모든부분에 log를 찍어서 어떤 부분에서 진행이 되지 않는지 확인.
2. PostMan에서 임의의 값을 header에 포함시켜서 호출시 → Response header에 확인됨.
3. 문자에 대한 이상이 아닌 특수문자를 의심하여 Refresh_token 선언을 변경 → RefreshToken → 정상적으로 Response header 에 정상적으로 추가됨을 확인.

해결방법

- 클라이언트와 응답과 요청을 받을때 배포서버는 Nginx를 거치게 되는대 Nginx에서 헤더에 언더스코어( \_ )가 포함된 경우 제거하는 설정이 디폴트값으로 되어 있었다.
- 설정을 통해서 언더스코어를 허용할 수 있다.
- conf/nginx.conf에 다음 설정을 추가하면 허용할 수 있다.

```
  underscores_in_headers on;
```

</details>

## 🪄 성능개선

성능개선 전/후

<img width="100%" alt="LigthHouse" src="https://user-images.githubusercontent.com/119720123/233365757-7ddb274a-8f64-46e6-80b6-9a832fe2b79a.png">

---

## 🔎 참고 링크

- [협업 노션 페이지](https://jin29.notion.site/e1fbb1aaf8b94ee1a2b265eeb347ccb8?v=abae7a28c2d84bcdb71da069beaa933e)
- [BE_github Link](https://github.com/TeamPetPlace/BE)
- [FE_github Link](https://github.com/TeamPetPlace/FE)
- [진행상황 공유페이지](https://bow-starfish-ba2.notion.site/a311d9a7965d46bd82da973e33b446ca)
